---
import Layout from "../layouts/main.astro";

import { getLanguage } from "../i18n";

export function getStaticPaths() {
  return [{ params: { path: undefined } }, { params: { path: "resume" } }];
}

const t = getLanguage("en");

const path = Astro.params.path as string;
const meta = {
  undefined: {
    title: t["meta.index.title"],
    description: t["meta.index.description"],
  },
  resume: {
    title: t["meta.resume.title"],
    description: t["meta.resume.description"],
  },
}[path]!;
---

<Layout
  title={meta.title}
  description={meta.description}
  image="https://mbund.dev/images/headshot.jpg"
>
  <script>
    import { languages, type Language } from "../i18n";

    const lang = (window.navigator.language || "en").substring(0, 2);

    if (languages.includes(lang as Language)) {
      window.location.pathname = `/${lang}${window.location.pathname}`;
    } else {
      window.location.pathname = `/en${window.location.pathname}`;
    }
  </script>
</Layout>
